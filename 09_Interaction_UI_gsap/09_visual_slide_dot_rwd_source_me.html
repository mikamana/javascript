<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">  

  <style>

    html,body{
	    height:100%; overflow:hidden; 
    }
    
    body,p,ul,li{
      margin:0px; padding:0px; list-style:none;
    }

    body{
      background:url("images/index_back.gif");
    }

    div#visual_wrap{
      width:100%; height:469px; float:left; margin-top:100px; overflow:hidden;       
    }

    div#visual_inner{
      width:1200px; height:100%; margin:0px auto; position:relative; left:0px; top:0px; overflow:hidden;
      border:solid 1px white; box-sizing:border-box;
    }

    ul#visual_list{
      width:100%; height:100%;  position:absolute; left:0px; top:0px; 
    }

    ul#visual_list li{
      width:100%; height:100%;  float:left; 
    }
    ul#visual_list li img{
      display:block; 
    }

    
    ul#dot_list{
      width:180px; position:absolute; left:50%; margin-left:-65px; bottom:20px; 
    }

    ul#dot_list li{
      width:16px; height:16px; float:left; margin-right:10px; border-radius:8px; background:#FFF;
      -webkit-transition:0.2s ease;
    }

    ul#dot_list li.selected{
      background:orange;
      width:32px;  
    }



    @media screen and (max-width:1200px) {

      div#visual_inner{
        width:100%; 
      }

    }

   
 
  </style>


  <title> visual_slide_dot_rwd </title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.4.2/gsap.min.js "></script>
  <!--GSAP CDN 코드 -->

  <script> 

        window.addEventListener("load", ()=>{

          const visualWrap=document.querySelector("#visual_wrap")
          const visualInner=document.querySelector("#visual_inner")
          const visualImg=document.querySelectorAll("#visual_list>li>img")
          const visualList=document.querySelector("#visual_list")
          const visualLi=document.querySelectorAll("#visual_list>li")
          const dot=document.querySelectorAll("#dot_list>li")


          let selectedDot=dot[0]
          let visualWidth=null;
          let timer=null;
          // overIndex는 초기값이 나와있어야함
          let overIndex=0;
          

          visualReset()
          // autoSlide()

        window.addEventListener("resize", visualReset)


        for(const item of dot){

          item.addEventListener("mouseenter", overDot)

        }

        // function autoSlide(){
        //   timer=setInterval(addOverIndex, 2000)
        // }
        


        function visualReset(){

          visualWidth=visualInner.offsetWidth;

          gsap.set(visualList, {width:visualWidth*visualLi.length})
          gsap.set(visualImg, {width:visualWidth})
          gsap.set(visualLi, {width:visualWidth})
          gsap.set(visualWrap, {height:visualImg[0].offsetHeight})

        }


        function overDot(){

          overIndex=getIndex(this)

          activateDot(overIndex)
          slideVisual(overIndex)
        
        }

        function addOverIndex(){
          // overIndex의 초기값을 지정해줘야 적용됌
          overIndex++

          if(overIndex>=visualLi.length){
            overIndex=0;
          }

          slideVisual(overIndex)
          activateDot(overIndex)

        }

        function slideVisual(index){

          gsap.to(visualList, {left:-visualWidth*index, duration:0.5, ease:"power1.out"})

        }

        function activateDot(index){

          if(selectedDot!=null && selectedDot!=dot[index]){
            selectedDot.classList.remove("selected")
          }

          if(selectedDot!=dot[index]){
            selectedDot=dot[index]
            selectedDot.classList.add("selected")
          }

        }

        function getIndex(checkMenu){

          let checkIndex=0;
          
          while((checkMenu=checkMenu.previousElementSibling)!=null){
              checkIndex++;
          }
          return checkIndex;

        }


        })











    
    
  </script>


</head>
<body>
   
  <div id="visual_wrap">   
    
      <div id="visual_inner">

        <ul id="visual_list">
            <li><img src="images/img1.gif" alt="" /></li>
            <li><img src="images/img2.gif" alt="" /></li>
            <li><img src="images/img3.gif" alt="" /></li>
            <li><img src="images/img4.gif" alt="" /></li> 
            <li><img src="images/img5.gif" alt="" /></li>           
        </ul>       
            
        <ul id="dot_list">
            <li class="selected"></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>           
        </ul>       
    
      </div>

</div>





  
</body>
</html>