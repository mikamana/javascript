<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">  

  <style>
  
    ul,li{
      margin:0px; padding:0px; list-style:none;
    }

    ul#menu_list{
      width:200px; position:absolute; left:500px; top:200px; 
    }

    ul#menu_list li{
      width:200px; height:40px; margin-bottom:20px; line-height:40px; background:#eeeeee;  text-align:center;
      -webkit-transition:0.2s ease; 
      cursor:pointer;
    }

    ul#menu_list li.selected{
      background:orange; color:white; 
    }    
  
  </style>
    

  <title> menuActivate_02 - selectedMenu 변수활용 </title>

  <script>    


    // 상단 CSS 스타일의 메뉴요소에 'selected' 클래스로 적용한 메뉴 활성화 스타일 속성 과 transition 속성확인 

    document.addEventListener('DOMContentLoaded',()=>{

      const menu=document.querySelectorAll('#menu_list>li'); // 모든메뉴 찾음 

      let selectedMenu=null; // 선택된 메뉴를 대입할 변수

      for(const item of menu){ // 모든메뉴 이벤트 적용 
        item.addEventListener('click',menuActivate) // 모든메뉴 클릭하면 메뉴활성화 함수 실행 
      }

      function menuActivate(){

      // 기존 선택되었던 메뉴 비활성화 작업 
      
       if(selectedMenu!=null && selectedMenu!=this){ 
       // selectedMenu에 기존의 선택되었던 메뉴가 존재하고 기존에 선택되었던 메뉴와 현제 선택된 메뉴가 다를때만 실행        
       /*
       중요) selectedMenu에 기존에 선택된 메뉴가 저장되어있지 않을때는 classList() 명령이 실행되지 않음 (에러); 
            기존에 선택되었던 메뉴와 현제 선택된 메뉴가 같을때는 실행할 필요없음 (퍼포먼스 줄임)       
       */
        selectedMenu.classList.remove('selected'); // 기존의 선택된 메뉴에 기존 CSS 스타일 'selected' 클래스 속성 제거하여 비활성화 
        // 중요) for구문을 사용하여 모든 메뉴를 비활성화하는 것보다 퍼포먼스가 효율적 
       }

       // 새로선택된 메뉴 활성화 작업            
        
        if(selectedMenu!=this){ // 기존에 선택되었던 메뉴와 현제 선택된 메뉴가 다를때만 실행 (같을때는 실행할 필요없음)

          selectedMenu=this; // 새로선택된 메뉴를 selectedMenu 에 저장 
          selectedMenu.classList.add('selected') // 현제 선택된 메뉴에 기존 CSS스타일 'selected' 클래스 속성 추가하여 활성화 

        }      
        
      }      

    })    
    
  </script>


</head>
<body>

    <ul id="menu_list">
      <li>첫번째메뉴</li>
      <li>두번째메뉴</li>
      <li>세번째메뉴</li>
      <li>네번째메뉴</li>
    </ul>
  
</body>
</html>