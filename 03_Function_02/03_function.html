<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title> 중첩함수 </title>
  <script>
  
  /*중첩함수(내부함수)의 정의와 특징이해 

  중첩함수 : 함수내부에 또 다른 내부함수로 사용되는 함수 

  function outer(){

    function inner(){ // inner() 함수를 중첩함수 또는 내부함수, 지역함수 

    }
    inner()

  }
  outer()

  - 함수를 많이 사용할때 관련있는 함수들을 내부함수로 사용하여 코드의 그룹화 - 코드관리 효율성과 퍼포먼스를 최소화  

  - 중첩함수 (내부함수)는 함수안에서만 1회성으로 많이 사용된다. ( 함수밖에서 직접호출이 불가 - return을 사용하면 가능 )

    ( 서로다른 외부함수 안에서의 내부함수의 이름은 서로 같을 수 있다. ) 

  - 중첩함수 사용시 관련함수들의 변수관계를 주의 ( 내부에서 외부로 차례대로 변수를 참조 )

  - 클로저 현상을 이용하여 외부함수의 변수를 저장장소로 활용할 수 있다.

    클로저현상 (Closure) : 외부함수와 내부함수에 같은 변수를 사용할때 외부 함수를 실행시킨후 함수내에 지역변수임에도 불구하고 사라지지 않고 (초기화) 
    계속 그값이 유지되는 현상 - 계속 바꿔가면서 사용할수 있는 데이터 저장소로 사용가능 

  */

  // 계산기 일반함수를 중첩함수로 변경 


  // 계산기 일반함수 

  /*
  
  let num1=prompt("첫번째 숫자를 입력하세요")  
  let op=prompt("사칙연산자중 하나를 입력하세요")
  let num2=prompt("두번째 숫자를 입력하세요")  
  
  num1=parseInt(num1);
  num2=parseInt(num2);
  
  let result; 
  
   // 필요한 변수들을 전역변수로 선언     

  function calculator(){ 

    switch(op){

      case "+" : 
      result=num1+num2;
      break;

      case "-":
      result=num1-num2;
      break;

      case "*":
      result=num1*num2;
      break;

      case "/":
      result=num1/num2;
      break;

      default :
      result="지원하지 않는 연산자 입니다."
    }

    return result // 결과값을 돌려줄 함수는 반드시 retrun 문이 필요 

  }  

  document.write( calculator() )  // return result 를 사용하시 않으면 에러 undefined 

  */

  // 계산기 중첩함수로 변경  ( 전체적인 로직부분을 데이터 입력, 처리, 결과 부분으로 그룹화한다. )



function calculator(){ // 전체 함수를 하나로 함침 
  
  let num1=prompt("첫번째 숫자를 입력하세요");    
  let op=prompt("연산자를 선택하세요");
  let num2=prompt("두번째 숫자를 입력하세요")  

  num1=parseInt(num1);
  num2=parseInt(num2);

  let result=null;

  // 필요한 변수들을 전역변수로 선언    
  
  
  conduct() // 데이터 비교처리 부분을 중첩함수(내부함수)로 처리  - 코드 그룹화 
  finish() // 최종결과 실행함수 - 코드 그룹화 

  
  function conduct(){

    switch (op) {

      case "+":

        result = num1 + num2;
        break;

      case "-":

        result = num1 - num2;
        break;

      case "*":

        result = num1 * num2;
        break;

      case "/":

        result = num1 / num2;
        break;

      default:

        result = "지원하지 않는 연산자입니다. "

    }

    return result  

  }

  function finish(){
    document.write(conduct()) // 참고) document.write(result) ---  result 값을 직접쓰면 conduct() 함수에서 return result 값을 안써도 됨 ---
  }

}

calculator() // 함수실행  

   
  
  </script>
</head>
<body>
  
</body>
</html>